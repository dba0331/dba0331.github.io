"use strict";(self.webpackChunkjitdba_site=self.webpackChunkjitdba_site||[]).push([[780],{6830:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>a});var o=e(4848),i=e(8453),r=e(6113);const s={sidebar_position:8,title:"\u5206\u6790TxnLockNotFound"},c="",d={id:"4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/8\u5206\u6790TxnLockNotFound",title:"\u5206\u6790TxnLockNotFound",description:"\u793a\u610f\u56fe",source:"@site/docs/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/8\u5206\u6790TxnLockNotFound.md",sourceDirName:"4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501",slug:"/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/8\u5206\u6790TxnLockNotFound",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/8\u5206\u6790TxnLockNotFound",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,title:"\u5206\u6790TxnLockNotFound"},sidebar:"tidbSidebar",previous:{title:"\u5206\u6790\u6848\u4f8b\u95ee\u9898",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/7\u5206\u6790\u6848\u4f8b\u95ee\u9898"},next:{title:"\u5206\u6790\u9501\u7684\u4fe1\u606f",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/8\u5206\u6790\u9501\u7684\u4fe1\u606f"}},l={},a=[{value:"\u8bf4\u660e",id:"\u8bf4\u660e",level:2},{value:"FAQ",id:"faq",level:2},{value:"\u68c0\u7d22\u7528\u8bcd(\u5206\u6790TxnLockNotFound)",id:"\u68c0\u7d22\u7528\u8bcd\u5206\u6790txnlocknotfound",level:2}];function u(n){const t={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components},{Details:e}=t;return e||function(n,t){throw new Error("Expected "+(t?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"\u793a\u610f\u56fe"}),"\n","\n",(0,o.jsx)(r.A,{children:"/img/4SQL\u4e0e\u4f18\u5316/3\u4e8b\u52a1\u548c\u9501/\u5206\u6790TxnLockNotFound.svg"}),"\n",(0,o.jsx)(t.h1,{id:""}),"\n",(0,o.jsx)(t.h2,{id:"\u8bf4\u660e",children:"\u8bf4\u660e"}),"\n",(0,o.jsx)(t.p,{children:"TxnLockNotFound\u662f\u56e0\u4e3a\u4e0a\u9501\u4e4b\u540e, \u8fc7\u4e86\u8f83\u957f\u65f6\u95f4\u624d\u63d0\u4ea4, \u7136\u540e\u53d1\u73b0\u9501\u88ab\u6e05\u7406\u4e86\u3002"}),"\n",(0,o.jsx)(t.p,{children:"\u4e5f\u5c31\u662f\u4ee5\u4e0b\u7684\u6b63\u5e38\u6d41\u7a0b\u88ab\u6253\u7834\u4e86:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"\u5bf9\u60b2\u89c2\u4e8b\u52a1\u6765\u8bf4, \u4fee\u6539\u6570\u636e\u65f6\u5c31\u4e0a\u9501\u4e86, \u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u4e0d\u65ad\u7eed\u7ea6TTL, \u9501\u4e0d\u4f1a\u88ab\u6e05\u7406\uff1b"}),"\n",(0,o.jsx)(t.li,{children:"\u5bf9\u4e50\u89c2\u4e8b\u52a1\u6765\u8bf4, \u4fee\u6539\u6570\u636e\u4e0d\u4e0a\u9501, \u57282PC\u63d0\u4ea4\u65f6prewrite\u4e0a\u5b8c\u9501\u5c31\u63d0\u4ea4, \u9501\u4e0d\u4f1a\u88ab\u6e05\u7406\uff1b"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"\u9501\u7684\u521d\u59cbTTL\u503c\u7684\u5b9a\u4e49 (\u5355\u4f4d\u6beb\u79d2)"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-go",metastring:'title="https://github.com/tikv/client-go/blob/master/txnkv/transaction/2pc.go#L770"',children:"var defaultLockTTL uint64 = 3000\n"})}),"\n",(0,o.jsx)(t.p,{children:"\u901a\u5e38\u539f\u56e0\u4e0e\u5f53\u65f6\u7cfb\u7edf\u6027\u80fd\u76f8\u5173\u3002"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.h2,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(t.p,{children:"\u5176\u5b83\u4f1a\u8bdd\u7684\u8bfb\u64cd\u4f5c\u4e3a\u4ec0\u4e48\u8981\u6e05\u6211\u7684\u9501, \u4e0d\u662f\u6709mvcc\u5417?"}),"\n",(0,o.jsx)(t.p,{children:"\u5176\u5b83\u4f1a\u8bdd\u7684\u5199\u64cd\u4f5c\u4e0d\u662f\u5e94\u8be5\u88ab\u963b\u585e\u5417, \u4e3a\u4ec0\u4e48\u628a\u522b\u4eba\u7684\u9501\u5e72\u6389?"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(t.h2,{id:"\u68c0\u7d22\u7528\u8bcd\u5206\u6790txnlocknotfound",children:"\u68c0\u7d22\u7528\u8bcd(\u5206\u6790TxnLockNotFound)"}),"\n",(0,o.jsxs)(e,{children:[(0,o.jsx)("summary",{children:"used by local search"}),(0,o.jsx)("div",{children:(0,o.jsx)(t.p,{children:"TxnLockNotFound txn lock not found -> \u9690\u5f0f\u4e8b\u52a1\u3001load data\\nstart\u4e0ecommit ts\u624d\u5dee\u51e0\u79d2\\n\u6709\u65f6\u7cfb\u7edf\u8d1f\u8f7d\u4e5f\u4e0d\u9ad8 , TxnLockNotFound txn lock not found -> \u60b2\u89c2\u5e76\u53d1\u6279\u5904\u7406\\n\u7cfb\u7edf\u8d1f\u8f7d\u4e00\u822c\u8f83\u5927 , \u9690\u5f0f\u4e8b\u52a1\u3001load data\\nstart\u4e0ecommit ts\u624d\u5dee\u51e0\u79d2\\n\u6709\u65f6\u7cfb\u7edf\u8d1f\u8f7d\u4e5f\u4e0d\u9ad8 -> \u5e76\u53d1commit\u592a\u591a\u800c\u963b\u585e , \u9690\u5f0f\u4e8b\u52a1\u3001load data\\nstart\u4e0ecommit ts\u624d\u5dee\u51e0\u79d2\\n\u6709\u65f6\u7cfb\u7edf\u8d1f\u8f7d\u4e5f\u4e0d\u9ad8 -> \u4e50\u89c2\u6216\u60b2\u89c2\u4e8b\u52a1\\nTTL\u8d85\u51fa\u5c31\u4f1a\u88ab\u6e05\u9501 , \u60b2\u89c2\u5e76\u53d1\u6279\u5904\u7406\\n\u7cfb\u7edf\u8d1f\u8f7d\u4e00\u822c\u8f83\u5927 -> \u7cfb\u7edf\u6162\u3001\u786c\u4ef6\u6162\\nserver is busy\\n\u89e6\u53d1\u6d41\u63a7 , \u60b2\u89c2\u5e76\u53d1\u6279\u5904\u7406\\n\u7cfb\u7edf\u8d1f\u8f7d\u4e00\u822c\u8f83\u5927 -> \u4e50\u89c2\u6216\u60b2\u89c2\u4e8b\u52a1\\nTTL\u8d85\u51fa\u5c31\u4f1a\u88ab\u6e05\u9501 , \u5e76\u53d1commit\u592a\u591a\u800c\u963b\u585e -> \u5efa\u8bae \u8c03\u5927commit\u5e76\u53d1\u53c2\u6570\\n(\u6548\u679c\u6709\u9650) , \u7cfb\u7edf\u6162\u3001\u786c\u4ef6\u6162, server is busy, \u89e6\u53d1\u6d41\u63a7 -> \u5efa\u8bae \u627e\u51fa\u6027\u80fd\u7684\u74f6\u9888\u5e76\u4f18\u5316 , \u4e50\u89c2\u6216\u60b2\u89c2\u4e8b\u52a1\\nTTL\u8d85\u51fa\u5c31\u4f1a\u88ab\u6e05\u9501 -> \u4e3a\u4ec0\u4e48\u6709\u65f6TTL\u503c\u53ea\u6709\u51e0\u79d2 , \u4e3a\u4ec0\u4e48\u6709\u65f6TTL\u503c\u53ea\u6709\u51e0\u79d2 -> \u4e3a\u4ec0\u4e48\u4eceprewrite\u5230\\ncommit\u7684\u65f6\u95f4\u4e45(\u8d85\u51faTTL) , \u4e3a\u4ec0\u4e48\u6709\u65f6TTL\u503c\u53ea\u6709\u51e0\u79d2 -> TTL\u503c\u4e0d\u662f\u56fa\u5b9a\u7684\\n\u548c\u4e8b\u52a1\u5927\u5c0f\u76f8\u5173 , \u4e3a\u4ec0\u4e48\u4eceprewrite\u5230\\ncommit\u7684\u65f6\u95f4\u4e45(\u8d85\u51faTTL) -> \u5e76\u53d1commit\u592a\u591a\u800c\u963b\u585e , \u4e3a\u4ec0\u4e48\u4eceprewrite\u5230\\ncommit\u7684\u65f6\u95f4\u4e45(\u8d85\u51faTTL) -> \u7cfb\u7edf\u6162\u3001\u786c\u4ef6\u6162\\nserver is busy\\n\u89e6\u53d1\u6d41\u63a7 , \u4e3a\u4ec0\u4e48\u4eceprewrite\u5230\\ncommit\u7684\u65f6\u95f4\u4e45(\u8d85\u51faTTL) -> prewrite\u5904\u7406key\u591a , prewrite\u5904\u7406key\u591a -> \u5efa\u8bae \u51cf\u5c0f\u5904\u7406\u7ebf\u7a0b\u6bcf\u6279\u7684\u91cf , \u5efa\u8bae \u51cf\u5c0f\u5904\u7406\u7ebf\u7a0b\u6bcf\u6279\u7684\u91cf -> \u9501\u7684\u751f\u547d\u671fTTL\u7684\u503c , \u9501\u7684\u751f\u547d\u671fTTL\u7684\u503c , PessimisticLockNotFound ,"})})]})]})}function h(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,o.jsx)(t,{...n,children:(0,o.jsx)(u,{...n})}):u(n)}},6113:(n,t,e)=>{e.d(t,{A:()=>r});var o=e(6540),i=e(4848);class r extends o.Component{componentDidMount(){$("#graph").graphviz({url:this.props.children,ready:function(){var n=this;n.nodes().click((function(){var t=$();t.push(this),t=(t=t.add(n.linkedFrom(this,!0))).add(n.linkedTo(this,!0)),n.highlight(t,!0),n.bringToFront(t)})),$(document).keydown((function(t){27==t.keyCode&&n.highlight()})),$("#graph")[0].addEventListener("click",(function(){n.highlight()}),!0)}})}render(){return(0,i.jsx)("div",{id:"graph",children:" "})}}},8453:(n,t,e)=>{e.d(t,{R:()=>s,x:()=>c});var o=e(6540);const i={},r=o.createContext(i);function s(n){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),o.createElement(r.Provider,{value:t},n.children)}}}]);