"use strict";(self.webpackChunkjitdba_site=self.webpackChunkjitdba_site||[]).push([[1e3],{4437:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var i=t(4848),s=t(8453);const r={},d="",l={id:"4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u5178\u578b-DDL\u6162-mdl\u9501",title:"\u5178\u578b-DDL\u6162-mdl\u9501",description:"(1) \u60c5\u51b5\u4e00",source:"@site/docs/4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u5178\u578b-DDL\u6162-mdl\u9501.md",sourceDirName:"4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b",slug:"/4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u5178\u578b-DDL\u6162-mdl\u9501",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u5178\u578b-DDL\u6162-mdl\u9501",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tidbSidebar",previous:{title:"\u4e0d\u9700\u8981\u4f18\u5316-\u4f8b1-tikv\u5fd9",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u4e0d\u9700\u8981\u4f18\u5316-\u4f8b1-tikv\u5fd9"},next:{title:"\u5178\u578b-SQL\u6162-tikv\u5fd9",permalink:"/docs/4SQL\u4e0e\u4f18\u5316/2\u8bed\u53e5\u4f18\u5316/\u6848\u4f8b/\u5178\u578b-SQL\u6162-tikv\u5fd9"}},c={},o=[{value:"\u5206\u6790",id:"\u5206\u6790",level:2}];function a(e){const n={a:"a",br:"br",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:""}),"\n",(0,i.jsxs)(n.p,{children:["(1) \u60c5\u51b5\u4e00",(0,i.jsx)(n.br,{}),"\n","truncate \u9047\u5230mdl\u9501, \u5373\u8868\u4e0a\u6709\u5176\u5b83\u4e8b\u52a1\u3002",(0,i.jsx)(n.br,{}),"\n","\u7b49\u8868\u4e0a\u4e8b\u52a1\u7ed3\u675f, truncate\u83b7\u5f97mdl\u9501, \u5c31\u6267\u884c\u6210\u529f\u3002\n",(0,i.jsx)(n.img,{alt:"or\u8bed\u53e5",src:t(3747).A+"",width:"1200",height:"130"})]}),"\n",(0,i.jsxs)(n.p,{children:["(2) \u60c5\u51b5\u4e8c schema version \u76f8\u5173",(0,i.jsx)(n.br,{}),"\n","\u4e00\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u4e00\u76f4(\u6216\u8005\u4ea4\u66ff)\u5360\u7740schema version (\u5e94\u8be5\u662fregion\u4e0a\u7684epoch_versoin), DDL\u53ea\u6709\u7b49\u6240\u6709\u4e8b\u52a1\u7ed3\u675f, \u624d\u53ef\u4ee5\u6539\u53d8version, \u6ca1\u6709FIFO\u6392\u5217\u673a\u5236\u3002\u4e0b\u56fe\u4e2dver=155659\u4fdd\u6301\u4e86\u4e24\u4e2a\u591a\u5c0f\u65f6, \u4e5f\u8bf4\u660e\u4e00\u76f4\u6709\u4e8b\u52a1\u5360\u7740\u3002\n",(0,i.jsx)(n.img,{alt:"or\u8bed\u53e5",src:t(5940).A+"",width:"1200",height:"383"})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5206\u6790",children:"\u5206\u6790"}),"\n",(0,i.jsx)(n.p,{children:"DDL\u88ab\u963b\u585e\u6bd4\u8f83\u5e38\u89c1, \u4e0d\u8fc7tidb\u7684\u884c\u4e3a\u548coracle\u7b49\u5176\u5b83\u8f6f\u4ef6\u4e0d\u4e00\u6837, \u6240\u4ee5\u5bb9\u6613\u5f15\u8d77\u8bef\u89e3:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"oracle\u4e0bDDL\u9047\u5230\u4e8b\u52a1, \u5728nowait\u6a21\u5f0f\u4e0b\u4f1a\u76f4\u63a5\u62a5\u9519\u9000\u51fa, tidb\u5219\u662f\u7b49\u5f85, \u5bfc\u81f4\u7528\u6237\u8ba4\u4e3aDDL\u5df2\u7ecf\u5f00\u59cb\u771f\u6b63\u6267\u884c\u4e86;"}),"\n",(0,i.jsx)(n.li,{children:"oracle\u4e0b\u4e0d\u5c11DDL\u4f1a\u9501\u8868\u9501\u4e8b\u52a1, \u7528\u6237\u4e0d\u5e0c\u671bDDL\u8dd1\u7684\u65f6\u95f4\u957f;"}),"\n",(0,i.jsx)(n.li,{children:"tidb\u4e0b\u6bd4\u5982add index\u8dd1\u4e86\u4e00\u5929, \u7528\u6237\u4e0d\u77e5\u9053\u662f\u52a0\u7d22\u5f15\u65f6\u91cd\u7ec4\u6570\u636e\u6162, \u8fd8\u662f\u88ab\u963b\u585e\u4e86\u6839\u672c\u6ca1\u6709\u5f00\u59cb\u8dd1;"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u76ee\u524dv6/v7\u6ca1\u6709\u7b80\u5355\u5224\u65adddl\u662f\u5426\u88ab\u963b\u585e\u7684\u529e\u6cd5, \u6709\u65f6\u9700\u8981\u6362\u7528\u51e0\u4e2a\u529e\u6cd5, \u624d\u53ef\u4ee5\u786e\u8ba4DDL\u64cd\u4f5c\u662f\u88ab\u963b\u585e\u4e86:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u67e5\u8be2\u89c6\u56fe mysql.tidb_mdl_view, \u8fd9\u4e2a\u6bd4\u8f83\u6162, \u53ef\u80fd\u8981\u4e00\u5206\u949f, \u4e14\u6709\u65f6\u5019\u5185\u5bb9\u4e3a\u7a7a;"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u8be2information_schema.cluster_tidb_trx\u7684related_table_ids\u5217, \u770bddl\u7684\u8868\u662f\u5426\u5728\u5176\u4e2d;"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u8be2tidb.log, \u770b\u6709\u6ca1\u6709\u63d0\u793aold trx block ddl\u4e4b\u7c7b;"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5173\u4e8eMDL\u548cDDL\u7684\u4fe1\u606f, \u53ef\u4ee5\u53c2\u8003:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"/docs/4SQL%E4%B8%8E%E4%BC%98%E5%8C%96/3%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81/6%E4%B8%BB%E9%94%81%E5%89%AF%E9%94%81meta%E9%94%81mdl%E9%94%81",children:"\u4e8b\u52a1\u548c\u9501->\u4e3b\u9501\u526f\u9501meta\u9501mdl\u9501"})]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},3747:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/\u5178\u578b-DDL\u6162-mdl\u95011-6d059740f9f3bd4676422f03d02248ad.jpg"},5940:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/\u5178\u578b-DDL\u6162-mdl\u95012-5f10204bdb01e9cd7df2ea577c798b4c.jpg"},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);