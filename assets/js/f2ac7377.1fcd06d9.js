"use strict";(self.webpackChunkjitdba_site=self.webpackChunkjitdba_site||[]).push([[6523],{2743:(i,e,c)=>{c.r(e),c.d(e,{assets:()=>m,contentTitle:()=>s,default:()=>o,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var I=c(4848),n=c(8453);const t={sidebar_position:2,slug:"mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20"},s="",l={id:"2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20",title:"mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20",description:"copnext",source:"@site/docs/2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20.md",sourceDirName:"2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC",slug:"/2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20",permalink:"/docs/2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,slug:"mvcc\u6570\u91cf\u53ca\u5f71\u54cd\u56e0\u7d20"},sidebar:"tidbSidebar",previous:{title:"\u6982\u8ff0",permalink:"/docs/2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/\u6982\u8ff0"},next:{title:"\u67e5\u8be2min\u51fd\u6570\u6162",permalink:"/docs/2\u5b9e\u4f8b\u7ba1\u7406\u4e0e\u4f18\u5316/2TiKV\u5b9e\u4f8b/GC,\u5408\u5e76,MVCC/\u6848\u4f8b/\u67e5\u8be2min\u51fd\u6570\u6162"}},m={},d=[{value:"\u76f8\u5173\u94fe\u63a5",id:"\u76f8\u5173\u94fe\u63a5",level:2}];function g(i){const e={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...i.components};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(e.h1,{id:""}),"\n",(0,I.jsx)(e.pre,{children:(0,I.jsx)(e.code,{children:"\u76d1\u63a7\u754c\u9762tikv-details>\n    Coprocessor Detail>\n        Total Ops Details\uff08index scan)\nnext \u7684\u6b21\u6570\u548c processed_key \u7684\u6b21\u6570\u5bf9\u6bd4\uff0c\nprocessed_key \u4ee3\u8868\u8bfb\u5230\u7684\u6709\u6548 key\n"})}),"\n",(0,I.jsx)(e.p,{children:(0,I.jsx)(e.img,{alt:"cop_next",src:c(2882).A+"",width:"1199",height:"360"})}),"\n",(0,I.jsx)(e.p,{children:"next\u548cprocessed_key\u5dee\u4e0d\u591a, \u8bf4\u660emvcc\u6570\u636e\u4e0d\u591a\u3002"}),"\n",(0,I.jsx)(e.p,{children:"\u8868\u4e2dmvcc\u6570\u636e\u7684\u591a\u5c11, \u53d7\u4ee5\u4e0b\u4e00\u4e9b\u56e0\u7d20\u5f71\u54cd:"}),"\n",(0,I.jsxs)(e.ul,{children:["\n",(0,I.jsx)(e.li,{children:"\u4fdd\u7559\u65f6\u9650\u7684\u53c2\u6570, tidb_gc_life_time, \u751f\u4ea7\u4e2d\u53ef\u80fd\u4fdd\u75596h~24h"}),"\n",(0,I.jsx)(e.li,{children:"\u6570\u636e\u4fee\u6539\u91cf, \u548c\u4e1a\u52a1\u76f8\u5173"}),"\n",(0,I.jsx)(e.li,{children:"GC\u56de\u6536\u673a\u5236, Compaction Filter\u673a\u5236"}),"\n"]}),"\n",(0,I.jsx)(e.p,{children:"\u4e0a\u9762\u4e00\u4e9b\u6982\u5ff5, \u5728oracle undo\u4e2d\u4e5f\u6709, \u5982undo_retention\u4e4b\u7c7b\u3002"}),"\n",(0,I.jsxs)(e.p,{children:["mvcc\u6570\u91cf\u591a\u65f6, \u4f1a\u5f71\u54cd\u5230\u8bfb\u8868\u7684\u6027\u80fd, \u4e00\u4e9b\u7b80\u5355\u7684distsql\u7d22\u5f15\u8bfb, \u5982\u679cmvcc\u4fdd\u7559\u65f6\u95f4\u957f\u3001\u6570\u91cf\u591a\u65f6, \u5bf9\u67e5\u8be2\u6027\u80fd\u7684\u5f71\u54cd\u8f83\u5927:\n",(0,I.jsx)(e.img,{alt:"mvcc\u6570\u91cf",src:c(7775).A+"",width:"409",height:"155"})]}),"\n",(0,I.jsx)(e.h2,{id:"\u76f8\u5173\u94fe\u63a5",children:"\u76f8\u5173\u94fe\u63a5"}),"\n",(0,I.jsx)(e.p,{children:(0,I.jsx)(e.a,{href:"/docs/4SQL%E4%B8%8E%E4%BC%98%E5%8C%96/1%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92/2plan%E5%8F%8Ainfo%E8%A7%A3%E8%AF%BB/%E6%8C%87%E6%A0%87-keys",children:"sql\u4f18\u5316->...->\u6307\u6807-keys"})})]})}function o(i={}){const{wrapper:e}={...(0,n.R)(),...i.components};return e?(0,I.jsx)(e,{...i,children:(0,I.jsx)(g,{...i})}):g(i)}},2882:(i,e,c)=>{c.d(e,{A:()=>I});const I=c.p+"assets/images/cop_next-9d979610ff44b5406d11eb11040c2288.jpg"},7775:(i,e,c)=>{c.d(e,{A:()=>I});const I="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg0KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzA3cHQiIGhlaWdodD0iMTE2cHQiIHZpZXdCb3g9IjAuMDAgMC4wMCAzMDcuMDIgMTE2Ij4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0LDExMikgc2NhbGUoMSkiIGRhdGEtbmFtZT0iIj4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0xMTIgMzAzLjAyLC0xMTIgMzAzLjAyLDQgLTQsNCIvPgo8IS0tIG12Y2Pkv53nlZkxMOWIhumSnyAtLT4KPGcgaWQ9Im5vZGUxIiBjbGFzcz0ibm9kZSIgcG9pbnRlci1ldmVudHM9InZpc2libGUiIGRhdGEtbmFtZT0ibXZjY+S/neeVmTEw5YiG6ZKfIj4KCjxlbGxpcHNlIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGN4PSI3MC41OCIgY3k9Ii05MCIgcng9IjcwLjY1IiByeT0iMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzAuNTgiIHk9Ii04NS44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPm12Y2Pkv53nlZkxMOWIhumSnzwvdGV4dD4KPC9nPgo8IS0tIOafpeivoueUqOaXtjEwbXMgLS0+CjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiIHBvaW50ZXItZXZlbnRzPSJ2aXNpYmxlIiBkYXRhLW5hbWU9IuafpeivoueUqOaXtjEwbXMiPgoKPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjIzOC4wOSIgY3k9Ii05MCIgcng9IjYwLjg3IiByeT0iMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjM4LjA5IiB5PSItODUuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj7mn6Xor6LnlKjml7YxMG1zPC90ZXh0Pgo8L2c+CjwhLS0gbXZjY+S/neeVmTEw5YiG6ZKfJiM0NTsmZ3Q75p+l6K+i55So5pe2MTBtcyAtLT4KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSIgZGF0YS1uYW1lPSJtdmNj5L+d55WZMTDliIbpkp8tJmd0O+afpeivoueUqOaXtjEwbXMiPgoKPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTE0MS4yOSwtOTBDMTQ5LjMzLC05MCAxNTcuNTUsLTkwIDE2NS42MiwtOTAiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTY1LjM4LC05My41IDE3NS4zOCwtOTAgMTY1LjM4LC04Ni41IDE2NS4zOCwtOTMuNSIvPgo8L2c+CjwhLS0gbXZjY+S/neeVmTYg5bCP5pe2IC0tPgo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIiBwb2ludGVyLWV2ZW50cz0idmlzaWJsZSIgZGF0YS1uYW1lPSJtdmNj5L+d55WZNiDlsI/ml7YiPgoKPGVsbGlwc2UgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgY3g9IjcwLjU4IiBjeT0iLTE4IiByeD0iNjguMzMiIHJ5PSIxOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3MC41OCIgeT0iLTEzLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCI+bXZjY+S/neeVmTYg5bCP5pe2PC90ZXh0Pgo8L2c+CjwhLS0gbXZjY+S/neeVmTEw5YiG6ZKfJiM0NTsmZ3Q7bXZjY+S/neeVmTYg5bCP5pe2IC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIiBkYXRhLW5hbWU9Im12Y2Pkv53nlZkxMOWIhumSny0mZ3Q7bXZjY+S/neeVmTYg5bCP5pe2Ij4KCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1kYXNoYXJyYXk9IjEsNSIgZD0iTTcwLjU4LC03MS41M0M3MC41OCwtNTkuNzggNzAuNTgsLTQ4LjAzIDcwLjU4LC0zNi4yOCIvPgo8L2c+CjwhLS0g5p+l6K+i55So5pe2ODBtcyAtLT4KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSIgcG9pbnRlci1ldmVudHM9InZpc2libGUiIGRhdGEtbmFtZT0i5p+l6K+i55So5pe2ODBtcyI+Cgo8ZWxsaXBzZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBjeD0iMjM4LjA5IiBjeT0iLTE4IiByeD0iNjAuODciIHJ5PSIxOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMzguMDkiIHk9Ii0xMy44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiPuafpeivoueUqOaXtjgwbXM8L3RleHQ+CjwvZz4KPCEtLSBtdmNj5L+d55WZNiDlsI/ml7YmIzQ1OyZndDvmn6Xor6LnlKjml7Y4MG1zIC0tPgo8ZyBpZD0iZWRnZTIiIGNsYXNzPSJlZGdlIiBkYXRhLW5hbWU9Im12Y2Pkv53nlZk2IOWwj+aXti0mZ3Q75p+l6K+i55So5pe2ODBtcyI+Cgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTM5LjM3LC0xOEMxNDgsLTE4IDE1Ni44NSwtMTggMTY1LjU0LC0xOCIvPgo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNjUuMzEsLTIxLjUgMTc1LjMxLC0xOCAxNjUuMzEsLTE0LjUgMTY1LjMxLC0yMS41Ii8+CjwvZz4KPC9nPgo8L3N2Zz4="},8453:(i,e,c)=>{c.d(e,{R:()=>s,x:()=>l});var I=c(6540);const n={},t=I.createContext(n);function s(i){const e=I.useContext(t);return I.useMemo((function(){return"function"==typeof i?i(e):{...e,...i}}),[e,i])}function l(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(n):i.components||n:s(i.components),I.createElement(t.Provider,{value:e},i.children)}}}]);